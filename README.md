# Renewly · AI-Powered Finance Copilot

Renewly is an end-to-end subscription intelligence platform designed around an **AI-first product philosophy**. The assistant is woven through every touchpoint—surfacing streaming insights on dashboards, narrating subscription and bill pages, and powering proactive alert workflows—so finance teams never chase context.

---

## Table of Contents

- [Renewly · AI-Powered Finance Copilot](#renewly--ai-powered-finance-copilot)
  - [Table of Contents](#table-of-contents)
  - [Vision \& Highlights](#vision--highlights)
  - [Product Tour](#product-tour)
    - [Landing \& Onboarding](#landing--onboarding)
    - [Authentication Suite](#authentication-suite)
    - [Dashboard · "Mission Control"](#dashboard--mission-control)
    - [Analytics Deep Dive](#analytics-deep-dive)
    - [Subscriptions Hub](#subscriptions-hub)
    - [Bills Command Center](#bills-command-center)
    - [Budgets \& Limits](#budgets--limits)
    - [Notifications Drawer](#notifications-drawer)
    - [Settings \& Preferences](#settings--preferences)
    - [Embedded AI Workspace](#embedded-ai-workspace)
  - [AI Copilot Experience](#ai-copilot-experience)
    - [End-to-End Flow](#end-to-end-flow)
  - [Architecture \& Tech Stack](#architecture--tech-stack)
  - [Environment \& Configuration](#environment--configuration)
  - [Running the Platform](#running-the-platform)
    - [Backend API](#backend-api)
    - [Frontend Client](#frontend-client)
  - [Developer Tooling](#developer-tooling)
  - [Quality Practices](#quality-practices)
  - [Reference Resources](#reference-resources)
  - [Contributing \& Support](#contributing--support)

---

## Vision & Highlights

- **AI-first workflows:** Every key page invokes the copilot for contextual briefings, autogenerated action plans, and follow-up prompts.
- **Data-rich analytics:** Interactive dashboards display KPIs, trends, and anomaly clusters backed by enhanced insight APIs.
- **Cohesive UX:** Tailwind-powered theming delivers cinematic landing and dashboard experiences with professional typography and motion accents.
- **Enterprise-ready backend:** Modular Express/Mongo services provide JWT-authenticated APIs, assistant orchestration, and notification pipelines.
- **Configurable LLM provider:** Swap vendors or models without touching UI code; graceful fallbacks guarantee guidance even when the upstream model is offline.

---

## Product Tour

### Landing & Onboarding

- Hero-led marketing page highlighting the AI finance copilot value proposition.
- Call-to-actions route users into registration or a guided dashboard tour.

### Authentication Suite

- `/signin` and `/signup` forms with validation, error messaging, and persistent sessions.
- Auth context hydrates user state, protecting all subsequent routes.

### Dashboard · "Mission Control"

- KPI cards, alerts, renewal clusters, and savings opportunities rendered in a responsive grid.
- Embedded assistant trigger shows unread counts, making AI advice one click away.
- Predictive alerts launch the assistant with pre-filled prompts describing the underlying risk.

### Analytics Deep Dive

- Time-range filters power multi-series line charts, category doughnut charts, and anomaly timelines.
- Hover states and drill-down panels reveal transaction-level context.
- Recommendation cards link to detail views with AI playbooks.

### Subscriptions Hub

- Searchable list with status badges, renewal windows, price normalization, and quick actions.
- Detail page streams an **AI subscription briefing** (renewal runway, stakeholder alignment, budget guardrails, etc.).
- Payment schedule, risk radar, and recommended follow-ups stay in sync with assistant outputs.

### Bills Command Center

- Bill roster displays amount due, urgency, and payment methods.
- Detail page mirrors the AI experience with lenses such as urgency window, cash-flow impact, compliance controls, and vendor relationships.
- Payment timeline and risk signals adapt as the copilot surfaces new insights.

### Budgets & Limits

- Budget overview tracks monthly limits, category allocations, and notification thresholds.
- Designed to inform the assistant of guardrails used in decision making.

### Notifications Drawer

- Slide-in tray with unread counts, filtering, and mark-as-read flows.
- Alerts double as prompt seeds for the assistant, linking users directly to recommended actions.

### Settings & Preferences

- Theme, notification preferences, currency defaults, and AI interaction styles all configurable.

### Embedded AI Workspace

- Collapsible assistant panel exposes conversation threads, suggestion chips, and action CTAs.
- Streaming animations and typing indicators create a polished conversational feel.
- Feedback endpoints capture thumbs-up/down responses for iterative model tuning.

---

## AI Copilot Experience

| Layer                    | Responsibilities                                                                   | Highlights                                                                                  |
| ------------------------ | ---------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------- |
| **Prompt Builders**      | Compose entity-aware prompts for subscriptions, bills, alerts, and ad-hoc queries. | Rotating analysis lenses keep responses fresh and multi-dimensional.                        |
| **`useAiBriefing` Hook** | Manages loading state, typing animation, follow-ups, and angle selection.          | Automatically re-runs when entities change; gracefully handles failures with fallback copy. |
| **Assistant APIs**       | `/api/v1/assistant/query`, `/insights`, `/feedback`.                               | Accepts structured context payloads (entity snapshot, angle metadata, follow-up text).      |
| **Fallback Narratives**  | Rich canned responses when the LLM is unreachable or returns errors.               | Ensures users always receive next steps instead of blank panels.                            |
| **Telemetry Hooks**      | Capture interaction metrics for future reinforcement.                              | Pluggable analytics-friendly events (not yet persisted by default).                         |

### End-to-End Flow

```
Page Hook → buildPrompt(entity, followUp, angle)
         → ApiClient.assistantQuery({ query, context })
         → Assistant Service (LLM or fallback)
         → Streaming UI w/ typing effect & suggestions
```

---

## Architecture & Tech Stack

```
renewly/
├─ client/                     # React + Vite SPA
│  ├─ src/components/          # Layout, charts, assistant UI, dashboard widgets
│  ├─ src/pages/               # Landing, auth, dashboard, bills, subscriptions, budgets, settings
│  ├─ src/hooks/               # AI briefing, currency, insights, preference hooks
│  ├─ src/routes/              # Route configuration & guards
│  └─ src/utils/               # API client, formatters, error helpers
│
└─ server/                     # Node/Express API
   ├─ src/config/              # Environment loader, nodemailer, queue wiring
   ├─ src/controllers/         # REST handlers (auth, bills, budgets, insights, assistant, etc.)
   ├─ src/database/            # Mongo connection lifecycle
   ├─ src/middleware/          # Auth guard, error boundary
   ├─ src/models/              # Mongoose schemas (User, Subscription, Bill, Budget, Action, ...)
   ├─ src/routes/              # Router registration
   └─ src/services/assistant/  # LLM orchestration & prompt builders
```

| Tier    | Stack                                                                       | Notes                                                                    |
| ------- | --------------------------------------------------------------------------- | ------------------------------------------------------------------------ |
| Client  | React 18, Vite 7, Tailwind CSS v4, React Router, Chart.js + react-chartjs-2 | Modern build tooling with modular feature folders.                       |
| Server  | Node.js 20+, Express, MongoDB/Mongoose, JSON Web Tokens, Nodemailer         | ESM project layout, async/await controllers, centralized error handling. |
| AI      | Google Generative AI (Gemini), pluggable provider interface                 | Fallback narratives provided when upstream is unreachable.               |
| Tooling | ESLint 9, Nodemon, Cross-env                                                | Base linting ready; add formatting/test runners as needed.               |

---

## Environment & Configuration

| File                            | Purpose                                           | Sample Keys                                                                                                                          |
| ------------------------------- | ------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------ |
| `client/.env.development`       | Frontend runtime config.                          | `VITE_API_URL=http://localhost:3000`                                                                                                 |
| `server/.env.development.local` | Backend runtime config (auto-picked by `env.js`). | `PORT`, `DB_URI`, `JWT_SECRET`, `EMAIL_USER`, `EMAIL_PASSWORD`, `GEMINI_API_KEY`, `LLM_PROVIDER`, `AI_ASSISTANT_MODEL`, `SERVER_URL` |

> The server loader reads `.env.<NODE_ENV>.local` at the project root, defaulting to development. Production variants follow the same naming convention.

---

## Running the Platform

### Backend API

```bash
cd server
npm install
npm run dev
```

- Base URL: `http://localhost:3000`
- Health check: `GET /`
- Primary routes: `/api/v1/auth`, `/api/v1/users`, `/api/v1/subscriptions`, `/api/v1/bills`, `/api/v1/budgets`, `/api/v1/insights`, `/api/v1/assistant`, `/api/v1/notifications`, `/api/v1/workflows`, `/api/v1/search`

### Frontend Client

```bash
cd client
npm install
npm run dev
```

- Local dev server: `http://localhost:5173`
- Protected routes automatically redirect unauthenticated users back to `/signin`.

---

## Developer Tooling

| Command                   | Location               | Description                                         |
| ------------------------- | ---------------------- | --------------------------------------------------- |
| `npm run dev`             | `client/`              | Launch Vite with hot-module replacement.            |
| `npm run dev`             | `server/`              | Start Express API with Nodemon reload.              |
| `npm run start`           | `server/`              | Production server bootstrap (no watcher).           |
| `npm run lint` _(future)_ | `client/` or `server/` | Placeholder for ESLint integration once configured. |

Recommended flow:

1. Start the API.
2. Start the client.
3. Sign in, explore dashboards, trigger AI briefings from alerts, bills, or subscriptions.

---

## Quality Practices

- **Type & runtime safety:** Runtime prop validation paired with centralized formatter utilities.
- **Graceful degradation:** AI fallbacks ensure the assistant never leaves a blank state.
- **Lint-ready:** ESLint 9 config shipped for both workspaces (run after installing dependencies).
- **Repository hygiene:** Unused templates, tests, and redundant assets trimmed for clarity.

Next additions (not yet implemented): unit tests, e2e flows, and CI automation.

---

## Reference Resources

- `client/src/hooks/useAiBriefing.js` – Single source of truth for streaming AI UX.
- `client/src/pages/**/*` – Feature-first page architecture with dedicated hooks and utilities.
- `server/src/services/assistant/*` – LLM request/response orchestration and future provider integrations.
- `server/src/config/env.js` – Deterministic environment loader for multi-environment deployments.

---

## Contributing & Support

We welcome collaboration. Open issues for feature ideas, bug reports, or integration questions. Pull requests should align with the feature/module folder structure and include any relevant documentation updates to keep the AI focus front and center.

> Renewly is provided without a formal license—add the license that best matches your deployment goals before production use.

---

**Happy shipping with Renewly’s AI copilot!**
